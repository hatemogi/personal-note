# 함수형 프로그래밍과 현실

함수형 프로그래밍이 좋다는 소문은 익히 듣고 있습니다. 그런데 대체 왜 좋은 건지 잘 이해가 되지는 않지요. 막연히, 함수형 프로그래밍을 배워가며 노력하다 보면 나도 체감할 수 있으리라는 기대만 품고 있습니다. 언젠가는 그 기대감을 충족할 만큼  공부해가며 함수형 프로그래밍 연재를 쓰고 싶습니다만, 오늘은 그냥 하소연 좀 해보겠습니다.

## 왜 함수형 프로그래밍을 하려고 하나?

프로그래밍은 어렵습니다. 문제를 해결하기 위해 새로운 코드를 쓰는 것도 어렵고, 내가 썼던 코드를 고치는 것도 어려우며, 남들과 함께 코드를 작성하는 것도 어렵습니다. 때로는 막막하고 답답하기도 합니다. 남의 코드를 보다가 도대체 왜 이런 코드를 짰는지 한심해서 화가 나기도 하고, 반대로 이렇게 아름다운 코드는 어떻게 작성할 수 있는 건지 존경심이 우러나오며 상대적 열등감을 느낄 때도 있습니다. 흔히 업무로 꼭 봐야 하는 코드들은 전자에 속하고, 취미로 보는 고수들의 코드는 후자에 속할 때가 많겠지요. 그러니, 내가 일하면서도 남들에게 한심한 코드를 적지 않으려 노력하는 게 중요할 따름입니다. 제가 짠 코드도 옆 사람이 보기엔 얼마나 한심하겠습니까? ㅠ.ㅠ

아무튼, 적어도 제게는 프로그래밍은 늘 어려운 일이었으며, 앞으로도 어려운 일일 것 같습니다. 저 어려서부터도 코딩을 쉽게 한다, 코드 없이 뭘 만든다라는 아이디어나 툴들의 소식은 들었습니다만, 적어도 제 시야 안에서는 어려운 코딩 없이 뭔가를 개발한다는 것은 다 헛된 신기루인 것 같습니다.

그래도 분명 조금씩 더 좋은 도구와 환경으로 나아가고 것도 사실이지요. 그 환경의 판도를 확 바꿀 도구가 함수형 프로그래밍이 아닐까 합니다. 아마도 대다수가 인정할 만한 정의가 마땅치 않은 것 같습니다만, 함수를 주요 도구로 삼아 프로그래밍을 하면 함수형 프로그래밍이라고 말하면 모호할지언정 틀린 말은 아닐 겁니다. 망치를 든 사람의 눈에는 못만 보인다던데, 프로그래머가 든 주요 도구가 무엇이냐에 따라, 문제에 접근하는 방향이 꽤 달라지는 것 같습니다. 함수형 프로그래머의 무기는 함수가 핵심인 거지요.

하지만 현대의 컴퓨터와 주류 프로그래밍 언어는 절차형인데요, 이 절차형 언어는 기본적으로 폰 노이만 구조와 밀접합니다. 그래서 절차형 프로그래밍은 (폰 노이만 구조로 만들어진) 하드웨어와 아주 밀접하게 직접적인 대응 관계로 계산이 흘러가는데요, 반면에 함수형 언어는 람다 대수를 기반으로 함수를 연달아 호출해서 입력값과 결괏값을 처리해 흘러갑니다. 전자는 기계가 중심이고, 사람이 그 기계의 관점에서 개발을 풀어내는 거고, 후자는 기계 중심보다는  조금 한 단계 높은 시점에서 접근한다고 보면 어떨까 합니다.

절차형 프로그래밍을 하면서, 그로 인해 야기되는 복잡함을 낮추기 위해 여러 도구가 있습니다, 객체지향 프로그래밍도 그중 하나의 방편일 테고요. 또, 절차형 프로그래밍을 메인으로 하되, 군데군데 함수형 접근을 시도하는 것도 좋은 시도인 것 같습니다. 운이 좋다면, 함수형 접근을 점차 늘려갈 수도 있겠지요.

함수형 프로그래밍에 대해서는 제 짧은 지식과 경험의 한계로 더 설명하기에는 어렵습니다만, 적어도 제가 "함수형 프로그래밍의 추종자다"라고 고백할 수 있겠습니다. (그럼, 객체지향 프로그래밍에는 배신자쯤 되려나요? ㅎㅎ) 추종자의 입장에서 보자면, 함수형 프로그래밍은 우리가 업무에서 고통받는 상황에서 구원의 빛을 내려줄 희망이라 믿습니다. 절차형 프로그래밍에서 흔히 보이는 지저분한 접근과 코드가 상대적으로 적지 않을까 합니다. 하는 일이 같더라도 접근 자체를 기계의 메모리로 하는 사람과 데이터와 연산으로 바라보는 시각의 차이가 해결 과정의 차이로 드러나는 것이지요. 때로 프로그래밍 업무에서 받게 되는 고통에서 좀 진통제를 맞고자, 함수형 프로그래밍이라는 환상에 빠져있는지도 모르겠습니다.

## 그러나 아직 현실은

최근 이런저런 이유로 다시 큰 회사 정규직으로 Java 개발자가 되었습니다. 이 나이에 받아주는 회사가 있어서 참 다행입니다. 그런데 하필 그 중에서도 지극히 절차적인 코드의 수렁에 풍덩 빠졌습니다. 전임자의 코드를 욕하는 것은 못난이들이나 흔히 하는 짓이라고 생각하며 숨을 고르고 있습니다만, 퇴근할 때마다 진 빠진 모습에 스스로가 안쓰럽기도 합니다. 한편 그런 생각이 듭니다. 함수형 프로그래밍이었다면, 타인의 코드가 이 정도로 내게 고통을 주었을까?

그리고 난 그냥 못났다. 전임자 욕을 안 할 수 없구나.

### 모나드가 뭔가요?

몇 달 전, 옛 직장 동료 T님을 만날 일이 있었는데요, 그 동료분이 함수형 프로그래밍 공부를 많이 하셨기에 모나드에 대해 여쭤본 적이 있습니다. 그랬더니 T님의 답변에 빵 터졌습니다.

"모나드요? 저 이제 그런 거 관심 가질 여유 없어요. 저 요새 자바 1.4로 개발해요"

아뿔싸! 2018년에 자바 1.4 운영 환경이라니, 어느 정도 레거시인지 대략 짐작이 가면서, 잠시 숙연해집니다. 이 상황에 사치로운 모나드 타령이라니요. 그래도, 자바 8 이상의 람다나 스트림이라도 쓸 수 있는 환경이면 얼마나 팔자 좋은 거냐며 스스로를 위로해 봅니다.

### 코딩 테스트는 결국 절차형

그리고, 지금 입사한 회사에 지원하면서 같이 지원한 다른 회사에서도 코딩 테스트라는 것도 봤습니다. 코딩 테스트 문제라는 게, 실무 능력과의 연관성이 크지 않다는 걸 경력자들은 다 알고 있지만, 그래도 그게 하나의 관문이니 어쩌겠습니까? "적어도" 코딩 테스트는 통과해야 그다음 얘기를 할 수 있는 거니까요. 암튼 코딩 테스트도 정해진 제한 시간이 있고, 흔히 출제되는 알고리즘 문제들을 풀려다 보니, 그저 제 자바 코드도 아주 지극히 절차형 코드로 나왔습니다. 언젠가 제대로 함수형 개발자가 된다면, 어떤 문제가 들이닥치건 좀 자신 있게 함수형 접근이 먼저 나올려나요?

## 원투 펀치

이렇게, 함수형 추종자 1인이, "코딩 테스트 문제는 결국 절차형으로 풀게 되더라"라는 잽을 맞고, 연이어, "내가 유지보수해 개발해야 할 코드 베이스는 절차형 중에서도 지극히 지극히 스파게티더라"는 스트레이트를 맞고 혼미해진 모습을 장황히 적었습니다.

게다가 세상은 아직 자바 1.4로도 잘만 돌아가는 걸?

에고, 어서 정신 차리고 스텝을 다시 밟아봐야겠습니다. 일단은 그냥 다짐해 봅시다. 함수형이든 절차형이든 잘 짜는 사람이 짠 코드가 우아하고, 뭘로 짜든 대충 짜는 사람의 코드는 고통인 법이라고. 그리고, 우선 나라도 남들에게 고통을 덜 줄 만한 코드를 위해 노력하자고.
