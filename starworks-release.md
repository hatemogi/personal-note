# 스타벅스 연결러 앱 공개 & 개발 후기

> 올해 초 진행하다 중단한 프로젝트를 뒤늦게 계속해서 마무리지었습니다. 스타벅스에서 무료 WiFi를 연결할 때 거치는 번거로운 과정을 자동화해주는 macOS 앱을 만들려는 프로젝트였고, 그 개발 과정을 친절히 남겨보겠다는 의욕과 함께 시작했으나, 이내 흐지부지됐더랍니다. 중간 과정은 건너뛰고, 드디어 앱만 후딱 개발해서 공개한  과정 이야기와 후기를 남깁니다. 여러분이 개발자라면, 자신도 겪었을 만한 비슷한 상황을 공감할 수 있는 내용일 테고, 개발자가 아니시라면, 개발자들은 어떤 고민을 하면서 뭔가를 만드는지 조금은 알게 되실만한 내용이리라 기대합니다.

## 스타벅스에서 만나는 불편한 화면

![](starworks/starbucks-captive-01.png)

이 화면 보신 분 계신가요? 바로 스타벅스에서 WiFi를 쓰려면 만나는 화면! 이 화면까지는 참을 만 한데, 이름과 이메일 주소를 요구하는데다 이용약관과 개인정보보호 이용 동의를 체크해야 하는 번거로움이 있습니다. 일부러 의도한 것인지, 아니면 개발자가 번거로워서 처리하지 않은 것인지, 매번 같은 과정을 처음부터 진행해야 합니다.

저는 스타벅스를 일터 삼아서 매일이다시피 가기 때문에 그 귀찮음이 제 게으름을 뛰어넘어 "뭔가를 해야겠다"라는 의지로 변했습니다. 그래서 힘들여 macOS 앱을 만들어서 해결하겠다는 생각으로 커졌습니다.

그런데, 가만 생각해보면, 귀찮은 인증 과정에 필요한 시간과 노력보다 앱을 만드는데 필요한 정성이 훨씬 많이 들 것 같습니다. 저 개인의 손익을 따지자면 손해가 훨씬 큰 일인 거죠. 여기서 자기 합리화가 필요합니다. 만드는 노력이 훨씬 커서 낭비지만, 때로 내 집중력을 흐트러트리며 불편한 저 연결 창을 보는 것 보다 정신적으로 이로운 결과로 이어질 거라며, 그리고 난 macOS 용 앱을 만들어 보고 싶은 욕구가 있으니, 이 기회에 배우면서 만들어보는 소득을 추가로 얻게 될 거라고. 그리고 나아가, 다른 사람도 유용하게 쓸 수 있을지 모르니, 공익(?)의 측면에서느 절대 손해가 아니라며 말이죠.

> 거 참, 거창하네요.

그래서 올해 초, 아래 글들을 남기며 야심차게 진행했습니다.

* [(1) 스타벅스 WiFi 연결러 개발 시작](https://goo.gl/DPY6UD)
* [(2) 스타벅스의 WiFi 네트워크 분석](https://goo.gl/5iYVST)
* [(2.5) 오리지널의 의미](https://goo.gl/1nGfW3)
* [(3) 사파리 익스텐션과 웹킷 인젝션 ](https://goo.gl/dKc4md)
* [(3.5) 프로젝트 재시작 보고 ](https://goo.gl/nnWsQQ)
* [(4) macOS 앱 개발에 필요한 것](https://goo.gl/H121zk)

그러나, 저 이후 개인적인 일들로 프로젝트의 우선 순위가 밀려났고, 때마침, 스타벅스보다 자주가는 카페도 생기고 해서 그 뒤로는 다른 재미있는 일들에 우선 순위가 넘어갔지요. 지금 돌이켜보면, 당시 상황에 몇 가지 바쁜 일이 생긴 것도 있고, 결정적으로는 당장 해야하는 코드 작성보다, 코딩 패러다임에서 방황했던 것이 문제였던 것 같습니다. 평범한 이벤트 기반(event-driven) 방식으로 개발하다가, FRP(Functional Reactive Programming)방식으로 바꿔 만들까 하는 욕심이 나서 정작 코딩은 안하고 딴 짓만 하게 됐던 거지요. 뭔가 배우면서 개발할 때의 함정 중 하나입니다. 익숙치 않은 방식을 배우면서 하려다 보면, 그 도구나 방식을 배우느라 정작 결과물에 들여야 할 노력과 정성이 다른 곳으로 새는 덫에 빠지곤 합니다. 그렇다고 익숙한 방식만으로 고수하면 발전이 없으니, 중간에서 줄타기를 잘 해야 하겠지요.

## 반 년 만에 마무리 작업

수 개월 시간이 흘렀고, 스타웍스 프로젝트와는 다른 별개 프로젝트 P가 중간에 지지부진하게 되었고, 스스로 이런 생각을 하게 되었습니다.

> 난, 참 뭔가 시작은 잘 하는데, 마무리를 잘 못하는구나.

누구나 어느 정도는 비슷하겠지만, 이제 슬슬 "너무 이러면 안 되겠다"라는 반성이 든 거죠. 그래서, 그 다소 지겨워졌던 그 프로젝트 P를 애써 이를 악물고 마무리 지었습니다. 결과는 아무래도 만족스럽지 못하지만, 그래도 뭔가 하나 끝냈다는 성취감이 좋더라고요. 의욕과 정성이 넘치는 상태에서 잘 마무리지었으면 더 상쾌했겠지만요.

이런 상황에서, 스타웍스 개발을 위해 사촌형이 그려준 로고가 생각납니다. 애써 정성을 들여서 로고까지 그려줬는데, 그냥 유야무야 되면 사촌형으로써도 아쉬울 것 아니겠습니까? 그리고 저 글을 읽으며 응원해줬던 분들도 있는데, 결과가 조금은 궁금하지 않겠습니까?

![](starworks/starworks-logo.png)

> 그래, 거의 다 만들었던 건데, 조금 더 진행해서 마무리 짓자. 개발기 공유까지 진행하는데 무리가 있다면, 그저 앱이라도 만들어서 공개하자.

커밋 로그를 보니, 3월 24일이 지난 번 마지막 커밋이었고, 이번에 다시 시작한 작업이 9월 23일부터였으니 반 년 정도 잠자고 있던 코드였네요.

## 스타웍스 v0.1.2 공개

다시 개발 작업을 한지 3주만에 0.1.2 버전을 공개했습니다. 주변 지인들에게 공개했던 0.1.0 버전이 있었고, 몇몇 문제를 해결해서, 이제는 모르는 분들이 써도 괜찮을 것 같더라고요. 앱을 다운로드 받을 수 있는 웹사이트도 만들어서 나름 친절한 설명과 함께 올려두었습니다. (불친절하다고요? 개발자가 이 정도면 꽤(!) 친절한 겁니다 ㅋ)

주변 지인께 써보시라 권하고, 마음에 들면 SNS 공유를 부탁드렸습니다.  그 중 특히 산솔님이 공유해주신 글이 설득력이 강했는지 꽤 많은 분이 소식을 접했고, 생각보다 많은 분들이 앱을 보시고 다운로드도 받은 것 같습니다. 공개한지 얼마 안됐다는 점과, 목표 사용자 층이 매우 얇다는 점을 고려하면 꽤 많이 받아주신 것 같습니다.

![](starworks/starworks.com.png)

뿌듯한 일이죠. 혹시 맥북(프로)를 쓰시면서 스타벅스에 자주 가신다면, 해당 앱 깔아서 띄워 놓으시면 편리하게 사용하실 수 있습니다.

## 개발하며 배운 점

개발기에 정리한 내용에도 대략 정리했습니다만, 스타웍스 앱은, macOS 앱 안에 WebKit엔진으로 커스텀 웹 브라우저를 붙여 놓고, 해당 웹브라우저와 앱이 웹 소켓으로 메시지를 주고 받으면서 스타벅스의 동의 화면이 나온다면 앱이 기억한 동의 정보를 대신 입력해주는 구조로 개발했습니다. 기존에도 이 스타벅스의 와이파이 연결 문제(?)를 해결하기 위해 크롬과 사파리용 확장 프로그램이 나와있는데, 그 방식과는 다른 장단점이 있지요.

###  ECMAScript 2015 (ES6)

아무튼, 앱과 웹 화면을 넘나들며 건드려야 하다보니, 웹 페이지 측의 자바스크립트 코드도 열심히 작성할 필요가 있었습니다. 한가지 편했던 점은, 이 자바스크립트 코드가 결국 내장된 커스텀 WebKit 브라우저에서만 잘 보이면 되므로, 자바스크립트 코드 호환성 문제가 아주 쉬워진다는 점이였습니다. 원래 호환성을 고려한다면 오래전 방식의 자바스크립트(ES5) 코드로 작성했었겠지만, 이 상황에서는 요새의 자바스크립트(ES6, aka. ECMAScript 2015)로 개발할 수 있는 거지요. 사소하게는 `let`/`const` 같이 지역변수와 상수 선언 구문도 있고, 번거로운 세미콜론도 이제 없어도 됩니다.

그렇다고 ES6의 전부를 쓸 수 있는 것은 아니지만, 거의 대부분을 쓸 수 있습니다. 그리고 DOM Element에도 예전에는 없었던 함수들이 생겨서, 사실상 이제는 jQuery는 필요 없는 수준인 것 같습니다. 스타웍스에서 필요로 하는 낮은 복잡도 정도라면 Vue.js도 거창한 것 같습니다. Vue.js 정도라면 아주 우아하게 할 수 있겠지만, 그냥 날 것의 자바스크립트 코드로도 충분한 거죠.

``` javascript
document.querySelector("img[alt='동의']")
```

이런 식으로, CSS 쿼리 셀렉터로 DOM 요소를 찾아낼 수 있습니다. 그 외에도 많은 부분들이 요새의 웹 기술로는 jQuery의 필요성이 많이 줄어든 상황인 것 같습니다. 특히 이제는 Vue.js나 React를 쓰는 분위기니 더더욱 불필요해 진 거고요. 관련해서 아래 사이트에서 어쩌면 여러분도 jQuery 없어도 될지도 모른다는 설명이 잘 나와있습니다.

(영문) http://youmightnotneedjquery.com

암튼, 스타웍스의 경우, 완전히 통제된 환경에서 고작 서너 페이지만 잘 처리하면 되는 상황이어서, jQuery나 Vue.js같은 라이브러리 없이도 잘 처리할 수 있는 상황이었습니다. 조금 복잡도가 올라간다면 Vue.js나 React를 쓰면 될 테니, 이제 jQuery의 입지는 아주 좁아졌다고 봐도 되지 않을까 합니다.

### 한글코딩

평소 주장대로, 그리고 제 개인 프로젝트이니만큼, 부담없이 한글로 코딩했습니다. 스타웍스 앱에 작성한 스위프트(Swift), 자바스크립트(Javascript), CSS등에 한글로 표기한 부분이 꽤 있지요. 역시 혼자 작성하기에는 참 편리합니다. 애써 영어로 전환할 필요 없이 함수 수준에서 한글로 이름을 지으니 쓰고 읽기가 참 편합니다. 함수명에 의도가 한글로 잘 드러나니, 별도로 주석을 많이 달 필요도 줄어들고요.

![](starworks/ko-js-code.png)

앞으로도 개인 프로젝트에는 한글로 많이 작성할 것 같습니다.

그러나, 아직 한글 도메인명은 조금 이른 것 같습니다. "스타웍스.com"의 경우, 동작 자체는 이제 어디서나 문제가 없기는 한데, 사소하게는 페이스북 페이지에 노출되는 URL이 그냥 xn--.com 처럼 국제 도메인명을 지원하지 않고 있어서, URL이 이상해 보이는 문제가 있습니다. 한글코딩 때와는 달리 네이버에 검색 사이트 등록을 할 때에도 아주 매끄럽게 잘 처리되어서, 곧 검색 노출이 될 것 같습니다만, 그래도 신경써야할 부분이 꽤 있는 것은 사실입니다.
